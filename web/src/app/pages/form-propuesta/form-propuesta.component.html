<app-header></app-header>

<div id="main-propuesta">
	<mat-card id="main-card">
		<mat-card-header style="margin-bottom: 20px;">
			<mat-card-title>Completá los datos de tu propuesta!</mat-card-title>
			<!-- <mat-card-subtitle>Completá tus datos para crear tu cuenta</mat-card-subtitle> -->
		</mat-card-header>
		<mat-card-content>
			<form [formGroup]="propuestaForm" class="form" [ngClass]="screenWidth > 576 ? 'big-form':'small-form'">
				<div class="form-input form-col">
					<mat-form-field>
						<mat-label>Producto</mat-label>
						<mat-select formControlName="producto">
							<mat-option *ngFor="let prod of solicitud.productos" [value]="prod.idProducto">
								{{prod.descripcion}}
							</mat-option>
						</mat-select>
						<mat-error *ngIf="propuestaForm.get('producto')!.hasError('required')">
							Campo obligatorio
						</mat-error>
					</mat-form-field>
				</div>

				<div class="form-col">
					<mat-form-field>
						<mat-label>Cantidad</mat-label>
						<input matInput formControlName="n_cantidad" type="number">
						<mat-error *ngIf="propuestaForm.get('n_cantidad')!.hasError('required')">
							Campo obligatorio
						</mat-error>
					</mat-form-field>
				</div>

				<section formArrayName="caracteristicas" class="form-col">
					<div>
						<label>Caracteristicas</label>
					</div>
					<div>
						<div *ngFor="let caracteristica of getCaracteristicasArray.controls; let i=index"
							class="caracteristica" [formGroupName]="i">
							<mat-form-field>
								<input matInput placeholder="Descripción" formControlName="s_descripcion">
							</mat-form-field>
							<button type="button" (click)="removeCaracteristica(i)" mat-icon-button color="light"
							style="height: 60px; margin-left: 5px;">
								<mat-icon>delete</mat-icon>
							</button>
						</div>
						<button type="button" (click)="agregarCaracteristica()" mat-button>
							<mat-icon>add</mat-icon>
							<label>Agregar Caracteristica</label>
						</button>
						
						
					</div>
				</section>

				<div class="form-col">
					<label for="file">Imágenes de la donación</label>
					<input formControlName="file" id="file" type="file" class="form-control" multiple=""
						(change)="onFileChange($event)">
				</div>

				<!-- <div></div> -->
				<div class="form-col form-imgs">
					<div class="show-image" *ngFor='let url of images' (click)="removeImagen(url)" >
						<div class="image" >
							<div class="overlay">
							</div>
							<mat-icon class="update" color="primary">delete</mat-icon>
							<img [src]="url" class="img-producto">
						</div>
					</div>
				</div>
			</form>
		</mat-card-content>
		<mat-card-actions class="buttons">
			<button mat-raised-button color="primary"
				(click)="confirmarPropuesta();propuestaForm.markAllAsTouched(); propuestaForm.valid">
				CONFIRMAR PROPUESTA
			</button>
		</mat-card-actions>
	</mat-card>
</div>